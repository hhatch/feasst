<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Frequently asked questions (FAQ) &#8212; FEASST v0.2.2-2-gcfecc8aee4-dirty documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v0.2.2-2-gcfecc8aee4-dirty',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://pages.nist.gov/nist-header-footer/js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Guidelines for developers" href="dev.html" />
    <link rel="prev" title="PhysicalConstants" href="PhysicalConstants.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">FEASST v0.2.2-2-gcfecc8aee4-dirty documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="PhysicalConstants.html" title="PhysicalConstants"
             accesskey="P">previous</a> |
          <a href="dev.html" title="Guidelines for developers"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions-faq">
<h1>Frequently asked questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-do-i-get-started">
<h2>How do I get started?<a class="headerlink" href="#how-do-i-get-started" title="Permalink to this headline">¶</a></h2>
<p>Try running some test cases and find one that is closest to what you want to do.
Reproduce a published result and carefully modify it as you see fit.</p>
</div>
<div class="section" id="simulation-issues">
<h2>Simulation issues<a class="headerlink" href="#simulation-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="calculate-average-properties">
<h3>Calculate average properties<a class="headerlink" href="#calculate-average-properties" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The log file from <a class="reference internal" href="MC.html#_CPPv2N2MC7initLogEPKcKx" title="MC::initLog"><code class="xref cpp cpp-func docutils literal"><span class="pre">MC::initLog()</span></code></a> may periodically output the instantaneous value of the property of interest.</li>
<li>Obtain the property of interest from the <a class="reference internal" href="api.html"><span class="doc">Application program interface (API)</span></a> periodically, as shown in the python script of <a class="reference internal" href="testcase/1_lj_2_nvt-mc_README.html"><span class="doc">LJ: NVT MC</span></a>.</li>
<li>Implement a custom Analysis class as demonstrated for average energy in the C++ script of <a class="reference internal" href="testcase/1_lj_2_nvt-mc_README.html"><span class="doc">LJ: NVT MC</span></a></li>
</ul>
</div>
<div class="section" id="calculate-grand-canonical-ensemble-average-properties">
<h3>Calculate grand canonical ensemble average properties<a class="headerlink" href="#calculate-grand-canonical-ensemble-average-properties" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>See the example in <a class="reference internal" href="testcase/1_lj_3_eostmmc_README.html"><span class="doc">LJ: muVT TMMC</span></a> for coexistence properties.</li>
</ul>
</div>
<div class="section" id="load-coordinate-files-or-place-particles-in-specific-locations">
<h3>Load coordinate files or place particles in specific locations<a class="headerlink" href="#load-coordinate-files-or-place-particles-in-specific-locations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>See the example in <a class="reference internal" href="testcase/1_lj_1_ref-config_README.html"><span class="doc">LJ: Configuration</span></a>.</li>
</ul>
</div>
<div class="section" id="make-feasst-do-exactly-what-you-want-it-to-do">
<h3>Make FEASST do exactly what you want it to do<a class="headerlink" href="#make-feasst-do-exactly-what-you-want-it-to-do" title="Permalink to this headline">¶</a></h3>
<p>You can create your own <a class="reference internal" href="Pair.html#_CPPv24Pair" title="Pair"><code class="xref cpp cpp-class docutils literal"><span class="pre">Pair</span></code></a>, <a class="reference internal" href="Trial.html#_CPPv25Trial" title="Trial"><code class="xref cpp cpp-class docutils literal"><span class="pre">Trial</span></code></a>, <a class="reference internal" href="Criteria.html#_CPPv28Criteria" title="Criteria"><code class="xref cpp cpp-class docutils literal"><span class="pre">Criteria</span></code></a>, <a class="reference internal" href="Analyze.html#_CPPv27Analyze" title="Analyze"><code class="xref cpp cpp-class docutils literal"><span class="pre">Analyze</span></code></a>, and <a class="reference internal" href="Random.html#_CPPv26Random" title="Random"><code class="xref cpp cpp-class docutils literal"><span class="pre">Random</span></code></a> classes as described in the documentation for the Base classes.
Start by finding an existing derived class that is the most similar and copying it.
You can also define new classes within the script themselves.
For example, see <a class="reference internal" href="testcase/1_lj_2_nvt-mc_README.html"><span class="doc">LJ: NVT MC</span></a> for a custom <a class="reference internal" href="Analyze.html#_CPPv27Analyze" title="Analyze"><code class="xref cpp cpp-class docutils literal"><span class="pre">Analyze</span></code></a>, and <a class="reference internal" href="testcase/2_jagla_1_ref-config_README.html"><span class="doc">Jagla: Configuration</span></a> for a custom <a class="reference internal" href="Pair.html#_CPPv24Pair" title="Pair"><code class="xref cpp cpp-class docutils literal"><span class="pre">Pair</span></code></a>.</p>
</div>
<div class="section" id="analysis-of-configurations-for-wl-tmmc-simulations">
<h3>Analysis of configurations for WL-TMMC simulations<a class="headerlink" href="#analysis-of-configurations-for-wl-tmmc-simulations" title="Permalink to this headline">¶</a></h3>
<p>For analyzing configurations to post-process simulation data (e.g.,
log and movie files), see the example code <a class="reference external" href="tools/xyz2bin.cc">tools/xyz2bin.cc</a></p>
<p>This code both splits the xyz files for a given order parameter and shows example of doing some
analysis within the c code. It uses the checkpointing to pick up run
variables. For example it knows how often you printed movies versus
logs. It also picks up on the number of processors and can average
over all of those processors for analysis.</p>
<p>It outputs files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>`analysis*` for average x position of first molecule
moviep[proc]b[bin].xyz
</pre></div>
</div>
<p>where proc is the processor number and bin is the order parameter
index as described by the acceptance criteria.</p>
</div>
<div class="section" id="initializing-a-simulation-from-an-xyz-file">
<h3>Initializing a simulation from an XYZ file<a class="headerlink" href="#initializing-a-simulation-from-an-xyz-file" title="Permalink to this headline">¶</a></h3>
<p>The following code reads an xyz file format to input an initial
configuration.</p>
<div class="highlight-C++"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">inFile</span><span class="p">(</span><span class="s">&quot;nameOfFile&quot;</span><span class="p">);</span>
<span class="n">pair</span><span class="p">.</span><span class="n">readxyz</span><span class="p">(</span><span class="n">inFile</span><span class="p">);</span>
</pre></div>
</div>
<p>If there are zero particles in the space class, then it automatically
attempts to add the molecules based on the first molecule type
described by the s.addMolInit function.</p>
<p>In cases with multiple components, this is not sufficient. So you will
want to make sure you initialize the appropriate number of molecules
in the appropriate order. For example, if your xyz file lists A,B,A,B.
or A,A,A...,B,B,B... then you need to add these in the right order.</p>
<p>For example, something like the following:</p>
<div class="highlight-C++"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">iMolA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">iMolA</span> <span class="o">&lt;</span> <span class="n">nMolA</span><span class="p">;</span> <span class="o">++</span><span class="n">iMolA</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">pair</span><span class="p">.</span><span class="n">addMol</span><span class="p">(</span><span class="s">&quot;/name/of/data/file&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then the same for B, assuming your xyz has all A listed, followed by
all B.</p>
<p>After all of the s.addMol commands are performed and the xyz file is
read, you will need to update the pair class as follows:</p>
<div class="highlight-C++"><div class="highlight"><pre><span></span><span class="n">p</span><span class="p">.</span><span class="n">initEnergy</span><span class="p">();</span>
</pre></div>
</div>
<p>A simple test that the xyz file was read correctly is to print it and
compare:</p>
<div class="highlight-C++"><div class="highlight"><pre><span></span><span class="n">p</span><span class="p">.</span><span class="n">printxyz</span><span class="p">(</span><span class="s">&quot;filename&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="restarting-a-simulation">
<h3>Restarting a simulation<a class="headerlink" href="#restarting-a-simulation" title="Permalink to this headline">¶</a></h3>
<p>Checkpoint files may be written periodically during a simulation, and
these may be used to restart a simulation. For example, see <a class="reference external" href="test/binary/tee/table/tee_rst.cc">test/binary/tee/table/tee_rst.cc</a></p>
<p>In this file, the checkpoint file is simply read and restarted in
two lines for single processor simulations:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// read checkpoint files</span>
<span class="n">feasst</span><span class="o">::</span><span class="n">WLTMMC</span> <span class="n">mc</span><span class="p">(</span><span class="s">&quot;tmp/rst&quot;</span><span class="p">);</span>

<span class="c1">// run simulation</span>
<span class="n">mc</span><span class="p">.</span><span class="n">runNumTrials</span><span class="p">(</span><span class="n">npr</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that, if you are attempting to restart a simulation that was
terminated abruptly, it is possible that the checkpoint files were in
the process of writing during the termination. In this case, the files
themselves could be missing important details. If this is the case,
your simulation will likely crash upon restart or output potential
energy which is quite different from the previous value. To remedy
this situation, the checkpoint files keep a &#8216;backup&#8217; file which ends
in &#8221;.bak&#8221;, which you may use instead. If you wish to use the backup
files, then all files ending in &#8216;.bak&#8217; should replace the same files
without the &#8216;.bak&#8217; ending. Before replacing files, it is recommended
to first backup the entire tmp folder.</p>
<p>Note that multiprocessor simulations may take additional care to
restart correctly. If you wish to restart just one processor, you may
simply use one of the files with an appended p# (e.g. &#8220;tmp/rstp0&#8221;).</p>
<p>If you wish to restart simulations that are independent, then an
example may be found in <a class="reference external" href="tools/rstMultiproc.cc">tools/rstMultiproc.cc</a>.</p>
<p>In this file, the two lines are as follows:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// read restart file</span>
<span class="n">feasst</span><span class="o">::</span><span class="n">WLTMMC</span> <span class="n">mc</span><span class="p">(</span><span class="s">&quot;tmp/rst&quot;</span><span class="p">);</span>

<span class="c1">// run sweeps</span>
<span class="n">mc</span><span class="p">.</span><span class="n">runNumSweepsRestart</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&quot;tmp/rst&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Restarting simulations that are coupled (e.g. by configuration swaps)
may require more initialization that is not currently described in
this documentation.</p>
</div>
<div class="section" id="isotropic-tabular-potential">
<h3>Isotropic tabular potential<a class="headerlink" href="#isotropic-tabular-potential" title="Permalink to this headline">¶</a></h3>
<p>Instead of implementing your own pair potential in the code, you may simply make a text file with your potential.
An example may be found in the following test directory: <a class="reference external" href="test/binary/tee/table">test/binary/tee/table</a></p>
<p>In this example, a binary LJ-lambda potential is simulated. In tee.cc
the potential is implemented with PairLJMulti, printed, and then used
to initialize PairTabular. It outputs the tables as files <code class="docutils literal"><span class="pre">tabi*j*</span></code>
which have headers like the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># tableType PairLJMulti</span>
<span class="c1"># tabDims 1</span>
<span class="c1"># dimorder0 0</span>
<span class="c1"># dimn0 5001</span>
<span class="c1"># dimmin0 0.94089999999999996</span>
<span class="c1"># dimmax0 1.1664000000000001</span>
<span class="mf">9542.2200121376991</span>
<span class="mf">9483.2587236908766</span>
<span class="mf">9424.6627162728782</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">dimn0</span></code> is the number of table elements.
Distances are shown as a function of the variable s=:math:<cite>r^2</cite>, such that dimmax0 = <span class="math">\(rCut^2 = 1.08^2\)</span> and dimmin0 = <span class="math">\(rCutInner^2 = sigFac^2 = 0.97^2\)</span>.
For tabular potentials, r &lt; rCutInner has infinite potential energy.</p>
<p>An example of utilizing the table potential (without generating) is provided in
<a class="reference external" href="test/binary/tee/table/tee_nogen.cc">test/binary/tee/table/tee_nogen.cc</a></p>
<p>This file and the <code class="docutils literal"><span class="pre">tabi*j*</span></code> files may be used as templates to create
your own pair potentials.</p>
</div>
<div class="section" id="getting-to-high-density">
<h3>Getting to high density<a class="headerlink" href="#getting-to-high-density" title="Permalink to this headline">¶</a></h3>
<p>This is a common issue with a few approaches:</p>
<ol class="arabic simple">
<li>You can use the parallel version with multiple windows. The <code class="docutils literal"><span class="pre">MC::initWindows(nExp=</span></code> variable sets the spacing based on some exponential distribution,e.g., nExp=3. makes windows even bigger o the low density side vs nExp=2.</li>
</ol>
<p><a class="reference internal" href="WLTMMC.html#_CPPv2N6WLTMMC11initWindowsEi" title="WLTMMC::initWindows"><code class="xref cpp cpp-func docutils literal"><span class="pre">WLTMMC::initWindows()</span></code></a></p>
<ol class="arabic simple" start="2">
<li>Break into multiple simulations. For example, I launched two jobs simultaneously, one with N=0 to 336, and another N=336 to N=550. Of course the low density ones finished 10x faster but then the high density windows were smaller</li>
<li>If you&#8217;re trying to do a high throughput approach where each model and condition can be quite different but you don&#8217;t want to have to hand pick conditions for each one, you can do a ridiculous number of windows (N=16/32 perhaps?) and terminate after some run time and only use the windows that managed to converge and throw out the rest. Still you would want to choose carefully the nMolMax to not have too much wasted processor time.</li>
<li>You can use the more MD-style approach of initializing a big box and squeezing it.</li>
</ol>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">.</span><span class="n">pressureset</span><span class="p">(</span><span class="mf">1000.</span><span class="p">);</span>
<span class="n">transformTrial</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mc</span><span class="p">,</span> <span class="s">&quot;lxmod&quot;</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>
<span class="n">transformTrial</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mc</span><span class="p">,</span> <span class="s">&quot;lymod&quot;</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>
<span class="n">transformTrial</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mc</span><span class="p">,</span> <span class="s">&quot;lzmod&quot;</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">);</span>
<span class="c1">// transformTrial(&amp;mc, &quot;vol&quot;, 0.001);  // this one does an isotropic volume move instead of independent. You don&#39;t need both</span>
</pre></div>
</div>
<p>To remove the box move after equilibration, I prefer to &#8220;scope&#8221; the mc class with the box move and just make another clean mc class, or do an shallow copy (cloneShallow) before calling the transform trial and then use that clone later for production.
Another option is mc.removeTrial(trial#);</p>
</div>
</div>
<div class="section" id="compilation-issues">
<h2>Compilation issues<a class="headerlink" href="#compilation-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="modulenotfounderror-no-module-named-feasst">
<h3>ModuleNotFoundError: &#8220;No module named &#8216;feasst&#8217;&#8221;<a class="headerlink" href="#modulenotfounderror-no-module-named-feasst" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Verify that &#8220;/path/to/feasst/build/_feasst.so&#8221; was built without error, as described in <a class="reference internal" href="readme.html"><span class="doc">README</span></a>.</li>
<li>Use the command &#8220;<a class="reference external" href="tools/run.sh">tools/run.sh</a> script.py&#8221; instead of &#8220;<code class="docutils literal"><span class="pre">python</span> <span class="pre">script.py</span></code>&#8220;</li>
<li>Alternatively, point to build/_feasst.so in your python script as follows</li>
</ul>
<div class="highlight-py"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">feasst</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="error-function-class-is-not-a-member-of-feasst">
<h3>error: ‘[function/class]’ is not a member of ‘feasst’<a class="headerlink" href="#error-function-class-is-not-a-member-of-feasst" title="Permalink to this headline">¶</a></h3>
<p>In C++, this error often occurs when one does not include a necessary header file.
For example, to use <cite>feasst::swapTrial()</cite>, one must have <cite>#include &#8220;trial_swap.h&#8221;</cite>.</p>
</div>
<div class="section" id="compilation-error-gives-can-not-be-used-when-making-a-shared-object-recompile-with-fpic">
<h3>Compilation error gives &#8220;can not be used when making a shared object; recompile with -fPIC&#8221;<a class="headerlink" href="#compilation-error-gives-can-not-be-used-when-making-a-shared-object-recompile-with-fpic" title="Permalink to this headline">¶</a></h3>
<p>One of your external libraries (e.g., fftw or xdrfile) needs the flag &#8220;&#8211;enable-shared&#8221; during configuration.
Or you can edit CMakeLists.txt to add &#8220;-fPIC&#8221; as follows:</p>
<p>SWIG_LINK_LIBRARIES(feasst ${PYTHON_LIBRARIES} ${EXTRA_LIBS} -fPIC)   # HWH: add -fPIC
#SWIG_LINK_LIBRARIES(feasst ${PYTHON_LIBRARIES} ${EXTRA_LIBS})        # HWH: old version</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="testcase.html">Test cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Application program interface (API)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently asked questions (FAQ)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-started">How do I get started?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulation-issues">Simulation issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compilation-issues">Compilation issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Guidelines for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="contrib.html">Authors and acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact and bug reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation guide</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="PhysicalConstants.html" title="PhysicalConstants"
              >previous</a> |
            <a href="dev.html" title="Guidelines for developers"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>